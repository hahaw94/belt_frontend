# 首页手动输入功能说明

## 📋 更新内容

为首页视频播放器添加了**手动输入控制面板**，用户可以直接输入 WebRTC 流地址进行播放。

---

## ✅ 新增功能

### 1. 手动输入面板
位于播放器顶部，包含：
- **输入框**: 输入 WebRTC 流地址
- **播放按钮**: 开始播放视频流
- **停止按钮**: 停止当前播放

### 2. 使用方式

#### 方式一：手动输入
```
1. 在输入框中输入 WebRTC 流地址
2. 点击"播放"按钮或按回车键
3. 系统自动解析并播放
```

#### 方式二：点击摄像头（保留）
```
1. 点击地图上的摄像头图标
2. 系统自动匹配并播放对应流
```

---

## 🎯 URL 格式

### 标准格式
```
http://服务器IP:端口/index/api/webrtc?app=应用名&stream=流名&type=play
```

### 示例
```
http://10.18.21.207:18081/index/api/webrtc?app=rtp&stream=camera1&type=play
```

### 参数说明
| 参数 | 说明 | 示例 |
|------|------|------|
| **服务器IP** | ZLMediaKit 服务器地址 | 10.18.21.207 |
| **端口** | WebRTC 服务端口 | 18081 |
| **app** | 应用名称 | rtp, live |
| **stream** | 流名称/ID | camera1, test |
| **type** | 播放类型 | play |

---

## 🎨 界面设计

### 控制面板样式
- **背景**: 深蓝渐变，半透明模糊效果
- **输入框**: 深色主题，蓝色边框，带图标
- **播放按钮**: 蓝色渐变，带阴影动画
- **停止按钮**: 红色渐变，禁用状态灰化

### 交互效果
- ✅ 鼠标悬停：边框高亮
- ✅ 获得焦点：蓝色发光效果
- ✅ 按钮悬停：阴影增强 + 上移动画
- ✅ 回车键：触发播放

---

## 📝 技术实现

### 1. 新增状态
```javascript
const manualStreamUrl = ref('') // 手动输入的流地址
```

### 2. 新增函数
```javascript
// 手动播放流
const playManualStream = () => {
  // 1. 验证输入
  // 2. 解析 WebRTC URL
  // 3. 设置播放器配置
  // 4. 开始播放
}
```

### 3. 导入图标
```javascript
import { VideoPlay, VideoPause } from '@element-plus/icons-vue'
```

### 4. 模板结构
```vue
<div class="manual-input-panel">
  <div class="input-wrapper">
    <el-input v-model="manualStreamUrl" />
    <el-button @click="playManualStream">播放</el-button>
    <el-button @click="stopStream">停止</el-button>
  </div>
</div>
```

---

## 🔧 功能特性

### 输入验证
- ✅ 空值检查
- ✅ URL 格式验证
- ✅ 参数完整性检查

### 错误处理
- ✅ 解析失败提示
- ✅ 播放错误提示
- ✅ 友好的错误信息

### 用户体验
- ✅ 回车快捷键
- ✅ 清除按钮
- ✅ 加载状态显示
- ✅ 停止按钮禁用状态

---

## 🎯 使用场景

### 1. 调试测试
快速测试不同的 WebRTC 流地址

### 2. 临时查看
查看临时配置的流，无需添加到系统

### 3. 演示展示
快速展示不同摄像头的实时画面

---

## 📊 界面布局

```
┌─────────────────────────────────────────────┐
│  手动输入控制面板                              │
│  ┌───────────────────┬────────┬────────┐    │
│  │ [摄像头图标] 输入框 │ 播放 按钮 │ 停止 按钮 │    │
│  └───────────────────┴────────┴────────┘    │
├─────────────────────────────────────────────┤
│                                             │
│            视频播放区域                        │
│         (WebRTC Player)                     │
│                                             │
│          或占位符提示区域                       │
│                                             │
└─────────────────────────────────────────────┘
```

---

## 🔄 交互流程

### 播放流程
```mermaid
用户输入URL
    ↓
验证URL格式
    ↓
解析WebRTC参数
    ↓
设置播放器配置
    ↓
开始播放
    ↓
显示成功提示
```

### 停止流程
```mermaid
用户点击停止
    ↓
清空播放器配置
    ↓
清空WebRTC参数
    ↓
强制重新渲染
    ↓
显示占位符
```

---

## 🎨 样式特点

### 科技感设计
- **渐变背景**: 深蓝色到黑色渐变
- **玻璃拟态**: backdrop-filter 模糊效果
- **发光效果**: 蓝色边框发光
- **动画过渡**: 0.3s 平滑过渡

### 响应式设计
- **输入框**: flex: 1 自适应宽度
- **按钮**: 固定宽度 90px
- **间距**: 统一 10px 间距

---

## ⚠️ 注意事项

### 1. URL 格式要求
必须是完整的 WebRTC URL，包含所有必要参数

### 2. 协议支持
当前仅支持 WebRTC 协议，不支持 FLV/HLS 等

### 3. 网络要求
- 确保 ZLMediaKit 服务正常运行
- 确保 WebRTC 端口可访问
- 确保网络连接稳定

### 4. 浏览器兼容性
- Chrome 85+
- Edge 85+
- Firefox 不完全支持

---

## 📞 常见问题

### Q1: 输入地址后无法播放？
**A**: 检查以下几点：
- URL 格式是否正确
- 服务器地址和端口是否正确
- app 和 stream 参数是否存在
- ZLMediaKit 服务是否启动

### Q2: 播放成功但无画面？
**A**: 可能原因：
- 流还未开始推送
- 编码格式不支持
- 网络延迟较高

### Q3: 停止按钮无法点击？
**A**: 这是正常的，只有在播放状态时停止按钮才可用。

---

## 🚀 后续优化建议

### 1. 历史记录
保存最近使用的流地址，方便快速选择

### 2. 预设地址
提供常用流地址的快捷选择

### 3. 批量导入
支持批量导入多个流地址

### 4. 协议自动识别
自动识别并切换到合适的播放器

---

## 📦 修改的文件

### belt/src/views/HomeView.vue
1. **导入图标** (第778行)
```javascript
import { VideoPlay, VideoPause } from '@element-plus/icons-vue'
```

2. **新增状态** (第827行)
```javascript
const manualStreamUrl = ref('')
```

3. **新增函数** (第1615-1640行)
```javascript
const playManualStream = () => { ... }
```

4. **新增模板** (第604-637行)
```vue
<div class="manual-input-panel">...</div>
```

5. **新增样式** (第5455-5541行)
```css
.manual-input-panel { ... }
```

---

**功能完成时间**: 2025-11-07  
**功能类型**: 手动输入控制面板  
**支持协议**: WebRTC  
**浏览器要求**: Chrome 85+, Edge 85+

